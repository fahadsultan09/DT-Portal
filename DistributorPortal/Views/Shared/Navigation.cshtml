<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
    </ul>
    @if (SessionHelper.LoginUser.IsDistributor)
    {
        <span style="width:95%; cursor: pointer;" class="text-danger" id="disclaimer">
            <marquee direction="left" scrollamount="3">
                All information or data contained on this web portal is limited, unconfirmed and is not intended to be relied upon. The Company do not endorse the accuracy or reliability of any information or statement and shall not be liable to any user or anyone else for any inaccuracy, error, disclosure, omission, interruption, failure, deletion, defect, alteration of or use of any content or record herein or for any loss or damage suffered by any person or organization arising from matters or information expressed on this web portal.
                Information, is intended only for the use of the individual or entity to which it is given access and may contain information that is confidential and subject to copyright. All users are self-responsible to safeguard their system access login and password credentials to protect unauthorized access to their account information.
                The Company reserves the right to remove, modify or suspend for any reason and without notice, any content, record or information from the web portal.
                For definite information and report or in case of any query you may contact by emailing us on <strong>samiho@samikhi.com</strong> OR <strong>samicustomer@samikhi.com</strong> or call our customer support officer on +92-(0)21-34527490-92.
            </marquee>
        </span>
    }
    <ul class="navbar-nav ml-auto @(SessionHelper.LoginUser.IsDistributor ? null : "d-none")">
        <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" id="NotificationCount">
                <i class="far fa-bell"></i>
                <span class="badge badge-warning navbar-badge" id="NotificationCountValue">@(SessionHelper.Notification != null ? SessionHelper.Notification.Where(x => !x.IsView).Count().ToString() : "")</span>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right scrollmenu" id="AppendNotification" style="height: 600px;">
                @if (SessionHelper.Notification != null)
                {
                    @foreach (var item in SessionHelper.Notification)
                    {

                        <a href="@(SessionHelper.URL + item.URL)" class="dropdown-item" style="background-color:@(item.Status == "Verified" ||item.Status ==  "Approved" ||item.Status ==  "InProcess" || item.Status == "Received" || item.Status == "PartiallyApproved" ? "#28a745cc" : item.Status == "Rejected" || item.Status == "Reject" ? "#dc3545cc" : "#11aabbcc"); color: #fff;">
                            <div class="media">
                                <div class="media-body">
                                    <p class="dropdown-item-title">Request #: @item.RequestId</p>
                                    <p class="text-sm">@item.Message</p>
                                    <p><i class="far fa-clock mr-1"></i>@item.RelativeTime</p>
                                </div>
                            </div>
                        </a>
                        <hr class="p-0 m-0" />
                    }
                }
            </div>
        </li>
    </ul>
</nav>
<!-- /.navbar -->
<!-- Main Sidebar Container -->
<aside class="main-sidebar sidebar-light-blue elevation-4">
    <!-- Brand Logo -->

    <a class="brand-link pl-0">
        <img src="~/Images/favicon.png" alt="AdminLTE Logo" class="brand-image">
        <span class="brand-text">SAMI Pharmaceuticals (Pvt.) Ltd.<sup>®</sup></span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
        <!-- Sidebar user panel (optional) -->
        <div class="col-lg-12 col-md-12 p-2">
            @*<div class="image">
                    <img src="~/lib/dist/img/DefaultImage.png" class="img-circle elevation-1" alt="User Image">
                </div>*@
            <div class="info" style="word-break: break-all;">
                <h5>@SessionHelper.LoginUser.FirstName @SessionHelper.LoginUser.LastName</h5>
                <span  style="word-break: break-all;"><strong>@SessionHelper.LoginUser.Role.RoleName</strong></span>
            </div>
        </div>

        <!-- Sidebar Menu -->
        <nav class="mt-2">

            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                <!-- Add icons to the links using the .nav-icon class with font-awesome or any other icon font library -->
                @{
                    var modules = SessionHelper.NavigationMenu.Where(e => e.ApplicationPage.IsShowOnNavigation == true && e.ApplicationActionId != (int)ApplicationActions.IsAdmin).OrderBy(y => y.ApplicationPage.Sort);

                    foreach (var module in modules.DistinctBy(x => x.ApplicationPage.ApplicationModuleId))
                    {
                        var applicationPages = modules.Where(x => x.ApplicationPage.ApplicationModuleId == module.ApplicationPage.ApplicationModuleId).DistinctBy(x => x.ApplicationPageId).ToList();

                        if (applicationPages.Count() > 0)
                        {
                            <li class="nav-item has-treeview">
                                <a href="#" class="nav-link active">
                                    <i class="@module.ApplicationPage.ApplicationModule.ModuleIcon"></i>
                                    <p>@module.ApplicationPage.ApplicationModule.ModuleName<i class="right fas fa-angle-left"></i></p>
                                </a>
                                <ul class="nav nav-treeview">
                                    @foreach (var pages in applicationPages.DistinctBy(a => a.ApplicationPageId))
                                    {
                                        <li class="nav-item">
                                            <a href="@Url.Content(pages.ApplicationPage.PageURL)" class="nav-link">
                                                <i class="@pages.ApplicationPage.PageIcon"></i>
                                                <p>@pages.ApplicationPage.PageTitle</p>
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item has-treeview">
                                <a href="@Url.Content(applicationPages[0].ApplicationPage.PageURL)" class="nav-link">
                                    <span class="far fa-circle nav-icon"></span>@applicationPages[0].ApplicationPage.PageTitle
                                </a>
                            </li>
                        }
                    }
                }
                <li class="nav-item has-treeview" style="word-break: break-all;">
                    <a href="@Url.Action("Logout","Login")" class="nav-link">
                        <i class="fas fa-arrow-circle-right"></i>
                        Log out
                    </a>
                </li>
            </ul>
        </nav>
        <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
</aside>

<div class="modal fade" id="modal-disclaimer" aria-modal="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h4 class="modal-title">DISCLAIMER</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <p>
                    All information or data contained on this web portal is limited, unconfirmed and is not intended to be relied upon. The Company do not endorse the accuracy or reliability of any information or statement and shall not be liable to any user or anyone else for any inaccuracy, error, disclosure, omission, interruption, failure, deletion, defect, alteration of or use of any content or record herein or for any loss or damage suffered by any person or organization arising from matters or information expressed on this web portal.
                </p>
                <p>
                    Information, is intended only for the use of the individual or entity to which it is given access and may contain information that is confidential and subject to copyright. All users are self-responsible to safeguard their system access login and password credentials to protect unauthorized access to their account information.
                </p>
                <p>
                    The Company reserves the right to remove, modify or suspend for any reason and without notice, any content, record or information from the web portal.
                </p>
                <p>
                    For definite information and report or in case of any query you may contact by emailing us on <strong>samiho@samikhi.com</strong> OR <strong>samicustomer@samikhi.com</strong> or call our customer support officer on +92-(0)21-34527490-92.
                </p>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
    $('body').on('click', '#NotificationCount', function () {

        var url = '@Url.Action("UpdateCount", "Notification")';
        $.get(url, function (context) {
            }).done(function (context) {
            });
        $('#NotificationCountValue').innerHTML = '0';
    });
</script>
