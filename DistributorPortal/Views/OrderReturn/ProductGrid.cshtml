@model IEnumerable<OrderReturnDetail>

<div class="table-responsive-sm">
    <table id="example" class="table table-bordered table-condensed table-hover table-striped table-sm">
        <thead>
            <tr>
                <th width="1%"></th>
                <th>Product Name</th>
                <th>Company</th>
                <th>Location</th>
                <th>Batch No</th>
                <th>MRP</th>
                <th>Total Price</th>
                <th>Quantity</th>
                <th>Discount</th>
                <th>Net Amount</th>
                <th>Manufacture Date</th>
                <th>Expiry Date</th>
                <th>Invoice No</th>
                <th>Invoice Date</th>
                <th>Intimation Date</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
            <tr>
                <td>
                    <div class="icheck-success d-inline">
                        <input type="checkbox" id="checkbox@(item.Id)" asp-for="@item.IsProductSelected" value="@EncryptDecrypt.Encrypt(item.ProductId.ToString())" checked="@(item.IsProductSelected == true ? "checked" : null)" />
                        <label for="checkbox@(item.Id)">
                        </label>
                    </div>
                </td>
                <td>@item.ProductMaster.ProductName</td>
                <td>@item.Company.CompanyName</td>
                <td>@item.PlantLocation.PlantLocationName</td>
                <td>@item.BatchNo</td>
                <td>@item.MRP</td>
                <td>@item.NetAmount</td>
                <td width="10%">
                    <input type="number" value="@item.Quantity" class="form-control ReturnQuantity numeric" _ProductId="@item.ProductId" />
                </td>
                <td>@item.ProductMaster.Discount %</td>
                <td>@item.NetAmount</td>
                <td>@item.ManufactureDate.ToString("dd/MM/yyyy")</td>
                <td>@item.ExpiryDate.ToString("dd/MM/yyyy")</td>
                <td>@item.InvoiceNo</td>
                <td>@item.InvoiceDate.ToString("dd/MM/yyyy")</td>
                <td>@item.IntimationDate.ToString("dd/MM/yyyy")</td>
                <td>
                    <a asp-action="Delete"
                       asp-controller="OrderReturn"
                       asp-route-DPID="@EncryptDecrypt.Encrypt(item.ProductMaster.Id.ToString())"
                       class="btn btn-danger"
                       data-ajax="true"
                       data-ajax-complete="UpdateOrderValue"
                       data-ajax-update="#ProductGrid"
                       data-ajax-method="POST">Delete</a>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $("#example").DataTable({
        });

        $('.ReturnQuantity').bind('keyup mouseup',function (data) {
            debugger;
            var intmaxvalue = @Int32.MaxValue;
            var Quantity = data.currentTarget.value;
            var Product = data.currentTarget.getAttribute("_ProductId");
            if (Quantity > intmaxvalue) {
                Toast.fire({
                    icon: 'error',
                    title: "Quantity cannot be greater than " + intmaxvalue
                });
            }
            else
            {
                $.ajax({
                type: "GET",
                url: '@Url.Action("UpdateQuantity", "OrderReturn")',
                data: { 'Quantity': Quantity, 'Product': Product },
                cache: false,
                success: function (response) {
                    
                },
                complete: function (response) {

                }
                })
            }
        });
    });
</script>


